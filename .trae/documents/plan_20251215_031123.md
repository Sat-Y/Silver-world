# Spring Boot Backend Implementation Plan

## 1. Project Structure

```
spring-backend/
├── src/
│   ├── main/
│   │   ├── java/com/mizuki/
│   │   │   ├── MizukiApplication.java       # Main application
│   │   │   ├── config/                      # Configuration
│   │   │   ├── controller/                  # REST controllers
│   │   │   ├── dto/                        # Data Transfer Objects
│   │   │   ├── entity/                      # JPA entities
│   │   │   ├── exception/                   # Custom exceptions
│   │   │   ├── repository/                  # JPA repositories
│   │   │   ├── security/                    # Security configuration
│   │   │   └── service/                     # Business logic
│   │   └── resources/
│   │       └── application.properties       # Configuration file
│   └── test/                               # Unit tests
└── pom.xml                                 # Maven dependencies
```

## 2. Implementation Steps

### 2.1 Create pom.xml
- Define Spring Boot parent and dependencies
- Add necessary Spring Boot starters
- Add database, security, and utility dependencies

### 2.2 Create Configuration Files
- application.properties with database connection and JWT config
- Security configuration
- CORS configuration

### 2.3 Create JPA Entities
- User entity
- Post entity  
- Album entity
- Photo entity

### 2.4 Create Repositories
- UserRepository
- PostRepository
- AlbumRepository
- PhotoRepository

### 2.5 Create DTOs
- Request and response DTOs for all entities
- Authentication DTOs

### 2.6 Create Services
- UserService for user management
- PostService for blog posts
- AlbumService for albums
- PhotoService for photos
- JwtService for token handling
- AuthService for authentication

### 2.7 Create Controllers
- AuthController for login/register
- PostController for posts management
- AlbumController for albums management
- PhotoController for photos management

### 2.8 Create Security Components
- JwtAuthenticationFilter
- UserDetailsServiceImpl
- SecurityConfig

### 2.9 Create Exception Handling
- Global exception handler
- Custom exceptions

## 3. Key Features to Implement

- ✅ JWT authentication
- ✅ Role-based access control
- ✅ File uploads for photos
- ✅ REST API matching Express.js endpoints
- ✅ Database persistence with MySQL
- ✅ Error handling and validation
- ✅ CORS configuration
- ✅ Admin role restrictions

## 4. API Endpoints to Match

### Auth
- POST /api/auth/register
- POST /api/auth/login
- GET /api/auth/me

### Posts
- GET /api/admin/posts
- POST /api/admin/posts
- GET /api/admin/posts/:id
- PUT /api/admin/posts/:id
- DELETE /api/admin/posts/:id

### Albums
- GET /api/admin/albums
- POST /api/admin/albums
- GET /api/admin/albums/:id
- PUT /api/admin/albums/:id
- DELETE /api/admin/albums/:id

### Photos
- POST /api/admin/albums/:id/photos
- DELETE /api/admin/albums/:id/photos/:photoId

## 5. Implementation Approach

1. **Keep API Interface Consistent**: Maintain exact same endpoint paths, request/response formats
2. **Secure Implementation**: Use Spring Security with JWT
3. **Scalable Design**: Follow Spring Boot best practices
4. **Testable Code**: Use dependency injection and clear separation of concerns
5. **Performance Optimized**: Use JPA with proper indexing
6. **Maintainable Code**: Follow clean code principles

## 6. Expected Deliverables

1. Complete Spring Boot project with all necessary files
2. Maven pom.xml with all dependencies
3. Application configuration
4. Implementation of all API endpoints
5. Security configuration
6. File upload functionality
7. Error handling
8. Database integration
9. Running instructions

## 7. Compatibility Guarantee

The implemented Spring Boot backend will be 100% compatible with the existing frontend, requiring no changes to the frontend code.